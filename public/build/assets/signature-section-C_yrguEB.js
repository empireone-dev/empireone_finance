import{p as G,n as H,k as J,r as j,j as T}from"./app-0Cr446pr.js";import{p as K}from"./index-BfZ-kfsG.js";import{B as Q}from"./Box-BA5qJKGa.js";import{B as I}from"./Button-CayQunv3.js";import"./DefaultPropsProvider-Bue_U7EK.js";import"./useTheme-BD6fO8ty.js";import"./extendSxProp-hJV7xQhv.js";import"./createSimplePaletteValueFilter-BmyParhM.js";var X={exports:{}};/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function S(t,o,n){this.x=t,this.y=o,this.time=n||new Date().getTime()}S.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};S.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};S.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function B(t,o,n,e){this.startPoint=t,this.control1=o,this.control2=n,this.endPoint=e}B.prototype.length=function(){for(var t=10,o=0,n=void 0,e=void 0,i=0;i<=t;i+=1){var s=i/t,r=this._point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),u=this._point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var l=r-n,a=u-e;o+=Math.sqrt(l*l+a*a)}n=r,e=u}return o};B.prototype._point=function(t,o,n,e,i){return o*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*e*(1-t)*t*t+i*t*t*t};function Z(t,o,n){var e,i,s,r=null,u=0;n||(n={});var l=function(){u=n.leading===!1?0:Date.now(),r=null,s=t.apply(e,i),r||(e=i=null)};return function(){var a=Date.now();!u&&n.leading===!1&&(u=a);var c=o-(a-u);return e=this,i=arguments,c<=0||c>o?(r&&(clearTimeout(r),r=null),u=a,s=t.apply(e,i),r||(e=i=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,c)),s}}function m(t,o){var n=this,e=o||{};this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle="throttle"in e?e.throttle:16,this.minDistance="minDistance"in e?e.minDistance:5,this.throttle?this._strokeMoveUpdate=Z(m.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=m.prototype._strokeUpdate,this.dotSize=e.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.onBegin=e.onBegin,this.onEnd=e.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(i){i.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(i))},this._handleMouseMove=function(i){n._mouseButtonDown&&n._strokeMoveUpdate(i)},this._handleMouseUp=function(i){i.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(i))},this._handleTouchStart=function(i){if(i.targetTouches.length===1){var s=i.changedTouches[0];n._strokeBegin(s)}},this._handleTouchMove=function(i){i.preventDefault();var s=i.targetTouches[0];n._strokeMoveUpdate(s)},this._handleTouchEnd=function(i){var s=i.target===n._canvas;s&&(i.preventDefault(),n._strokeEnd(i))},this.on()}m.prototype.clear=function(){var t=this._ctx,o=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,o.width,o.height),t.fillRect(0,0,o.width,o.height),this._data=[],this._reset(),this._isEmpty=!0};m.prototype.fromDataURL=function(t){var o=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=new Image,i=n.ratio||window.devicePixelRatio||1,s=n.width||this._canvas.width/i,r=n.height||this._canvas.height/i;this._reset(),e.src=t,e.onload=function(){o._ctx.drawImage(e,0,0,s,r)},this._isEmpty=!1};m.prototype.toDataURL=function(t){var o;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,e=Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return(o=this._canvas).toDataURL.apply(o,[t].concat(e))}};m.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};m.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};m.prototype.isEmpty=function(){return this._isEmpty};m.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};m.prototype._strokeUpdate=function(t){var o=t.clientX,n=t.clientY,e=this._createPoint(o,n),i=this._data[this._data.length-1],s=i&&i[i.length-1],r=s&&e.distanceTo(s)<this.minDistance;if(!(s&&r)){var u=this._addPoint(e),l=u.curve,a=u.widths;l&&a&&this._drawCurve(l,a.start,a.end),this._data[this._data.length-1].push({x:e.x,y:e.y,time:e.time,color:this.penColor})}};m.prototype._strokeEnd=function(t){var o=this.points.length>2,n=this.points[0];if(!o&&n&&this._drawDot(n),n){var e=this._data[this._data.length-1],i=e[e.length-1];n.equals(i)||e.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};m.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};m.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};m.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};m.prototype._createPoint=function(t,o,n){var e=this._canvas.getBoundingClientRect();return new S(t-e.left,o-e.top,n||new Date().getTime())};m.prototype._addPoint=function(t){var o=this.points,n=void 0;if(o.push(t),o.length>2){o.length===3&&o.unshift(o[0]),n=this._calculateCurveControlPoints(o[0],o[1],o[2]);var e=n.c2;n=this._calculateCurveControlPoints(o[1],o[2],o[3]);var i=n.c1,s=new B(o[1],e,i,o[2]),r=this._calculateCurveWidths(s);return o.shift(),{curve:s,widths:r}}return{}};m.prototype._calculateCurveControlPoints=function(t,o,n){var e=t.x-o.x,i=t.y-o.y,s=o.x-n.x,r=o.y-n.y,u={x:(t.x+o.x)/2,y:(t.y+o.y)/2},l={x:(o.x+n.x)/2,y:(o.y+n.y)/2},a=Math.sqrt(e*e+i*i),c=Math.sqrt(s*s+r*r),f=u.x-l.x,p=u.y-l.y,x=c/(a+c),y={x:l.x+f*x,y:l.y+p*x},g=o.x-y.x,P=o.y-y.y;return{c1:new S(u.x+g,u.y+P),c2:new S(l.x+g,l.y+P)}};m.prototype._calculateCurveWidths=function(t){var o=t.startPoint,n=t.endPoint,e={start:null,end:null},i=this.velocityFilterWeight*n.velocityFrom(o)+(1-this.velocityFilterWeight)*this._lastVelocity,s=this._strokeWidth(i);return e.start=this._lastWidth,e.end=s,this._lastVelocity=i,this._lastWidth=s,e};m.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};m.prototype._drawPoint=function(t,o,n){var e=this._ctx;e.moveTo(t,o),e.arc(t,o,n,0,2*Math.PI,!1),this._isEmpty=!1};m.prototype._drawCurve=function(t,o,n){var e=this._ctx,i=n-o,s=Math.floor(t.length());e.beginPath();for(var r=0;r<s;r+=1){var u=r/s,l=u*u,a=l*u,c=1-u,f=c*c,p=f*c,x=p*t.startPoint.x;x+=3*f*u*t.control1.x,x+=3*c*l*t.control2.x,x+=a*t.endPoint.x;var y=p*t.startPoint.y;y+=3*f*u*t.control1.y,y+=3*c*l*t.control2.y,y+=a*t.endPoint.y;var g=o+a*i;this._drawPoint(x,y,g)}e.closePath(),e.fill()};m.prototype._drawDot=function(t){var o=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;o.beginPath(),this._drawPoint(t.x,t.y,n),o.closePath(),o.fill()};m.prototype._fromData=function(t,o,n){for(var e=0;e<t.length;e+=1){var i=t[e];if(i.length>1)for(var s=0;s<i.length;s+=1){var r=i[s],u=new S(r.x,r.y,r.time),l=r.color;if(s===0)this.penColor=l,this._reset(),this._addPoint(u);else if(s!==i.length-1){var a=this._addPoint(u),c=a.curve,f=a.widths;c&&f&&o(c,f,l)}}else{this._reset();var p=i[0];n(p)}}};m.prototype._toSVG=function(){var t=this,o=this._data,n=this._canvas,e=Math.max(window.devicePixelRatio||1,1),i=0,s=0,r=n.width/e,u=n.height/e,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttributeNS(null,"width",n.width),l.setAttributeNS(null,"height",n.height),this._fromData(o,function(v,C,M){var D=document.createElement("path");if(!isNaN(v.control1.x)&&!isNaN(v.control1.y)&&!isNaN(v.control2.x)&&!isNaN(v.control2.y)){var W="M "+v.startPoint.x.toFixed(3)+","+v.startPoint.y.toFixed(3)+" "+("C "+v.control1.x.toFixed(3)+","+v.control1.y.toFixed(3)+" ")+(v.control2.x.toFixed(3)+","+v.control2.y.toFixed(3)+" ")+(v.endPoint.x.toFixed(3)+","+v.endPoint.y.toFixed(3));D.setAttribute("d",W),D.setAttribute("stroke-width",(C.end*2.25).toFixed(3)),D.setAttribute("stroke",M),D.setAttribute("fill","none"),D.setAttribute("stroke-linecap","round"),l.appendChild(D)}},function(v){var C=document.createElement("circle"),M=typeof t.dotSize=="function"?t.dotSize():t.dotSize;C.setAttribute("r",M),C.setAttribute("cx",v.x),C.setAttribute("cy",v.y),C.setAttribute("fill",v.color),l.appendChild(C)});var a="data:image/svg+xml;base64,",c='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+i+" "+s+" "+r+" "+u+'"')+(' width="'+r+'"')+(' height="'+u+'"')+">",f=l.innerHTML;if(f===void 0){var p=document.createElement("dummy"),x=l.childNodes;p.innerHTML="";for(var y=0;y<x.length;y+=1)p.appendChild(x[y].cloneNode(!0));f=p.innerHTML}var g="</svg>",P=c+f+g;return a+btoa(P)};m.prototype.fromData=function(t){var o=this;this.clear(),this._fromData(t,function(n,e){return o._drawCurve(n,e.start,e.end)},function(n){return o._drawDot(n)}),this._data=t};m.prototype.toData=function(){return this._data};const tt=Object.freeze(Object.defineProperty({__proto__:null,default:m},Symbol.toStringTag,{value:"Module"})),et=G(tt);var U={exports:{}},V;function nt(){return V||(V=1,function(t,o){(function(n,e){t.exports=e()})(H,function(){return function(n){function e(s){if(i[s])return i[s].exports;var r=i[s]={exports:{},id:s,loaded:!1};return n[s].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=n,e.c=i,e.p="",e(0)}([function(n,e){function i(a){var c=a.getContext("2d"),f=a.width,p=a.height,x=c.getImageData(0,0,f,p).data,y=u(!0,f,p,x),g=u(!1,f,p,x),P=l(!0,f,p,x),v=l(!1,f,p,x),C=v-P+1,M=g-y+1,D=c.getImageData(P,y,C,M);return a.width=C,a.height=M,c.clearRect(0,0,C,M),c.putImageData(D,0,0),a}function s(a,c,f,p){return{red:p[4*(f*c+a)],green:p[4*(f*c+a)+1],blue:p[4*(f*c+a)+2],alpha:p[4*(f*c+a)+3]}}function r(a,c,f,p){return s(a,c,f,p).alpha}function u(a,c,f,p){for(var x=a?1:-1,y=a?0:f-1,g=y;a?g<f:g>-1;g+=x)for(var P=0;P<c;P++)if(r(P,g,c,p))return g;return null}function l(a,c,f,p){for(var x=a?1:-1,y=a?0:c-1,g=y;a?g<c:g>-1;g+=x)for(var P=0;P<f;P++)if(r(g,P,c,p))return g;return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}])})}(U)),U.exports}(function(t,o){(function(n,e){t.exports=e(K,j,et,nt())})(H,function(n,e,i,s){return function(r){function u(a){if(l[a])return l[a].exports;var c=l[a]={exports:{},id:a,loaded:!1};return r[a].call(c.exports,c,c.exports,u),c.loaded=!0,c.exports}var l={};return u.m=r,u.c=l,u.p="",u(0)}([function(r,u,l){function a(_){return _&&_.__esModule?_:{default:_}}function c(_,d){var b={};for(var w in _)d.indexOf(w)>=0||Object.prototype.hasOwnProperty.call(_,w)&&(b[w]=_[w]);return b}function f(_,d){if(!(_ instanceof d))throw new TypeError("Cannot call a class as a function")}function p(_,d){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||typeof d!="object"&&typeof d!="function"?_:d}function x(_,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);_.prototype=Object.create(d&&d.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(_,d):_.__proto__=d)}Object.defineProperty(u,"__esModule",{value:!0});var y=Object.assign||function(_){for(var d=1;d<arguments.length;d++){var b=arguments[d];for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(_[w]=b[w])}return _},g=function(){function _(d,b){for(var w=0;w<b.length;w++){var h=b[w];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}return function(d,b,w){return b&&_(d.prototype,b),w&&_(d,w),d}}(),P=l(1),v=a(P),C=l(2),M=a(C),D=l(3),W=a(D),Y=l(4),$=a(Y),z=function(_){function d(){var b,w,h,F;f(this,d);for(var N=arguments.length,A=Array(N),R=0;R<N;R++)A[R]=arguments[R];return w=h=p(this,(b=d.__proto__||Object.getPrototypeOf(d)).call.apply(b,[this].concat(A))),h._sigPad=null,h._excludeOurProps=function(){var E=h.props,k=(E.canvasProps,E.clearOnResize,c(E,["canvasProps","clearOnResize"]));return k},h.getCanvas=function(){return h._canvas},h.getTrimmedCanvas=function(){var E=document.createElement("canvas");return E.width=h._canvas.width,E.height=h._canvas.height,E.getContext("2d").drawImage(h._canvas,0,0),(0,$.default)(E)},h.getSignaturePad=function(){return h._sigPad},h._checkClearOnResize=function(){h.props.clearOnResize&&h._resizeCanvas()},h._resizeCanvas=function(){var E=h.props.canvasProps||{},k=E.width,q=E.height;if(!k||!q){var O=h._canvas,L=Math.max(window.devicePixelRatio||1,1);k||(O.width=O.offsetWidth*L),q||(O.height=O.offsetHeight*L),O.getContext("2d").scale(L,L),h.clear()}},h.on=function(){return window.addEventListener("resize",h._checkClearOnResize),h._sigPad.on()},h.off=function(){return window.removeEventListener("resize",h._checkClearOnResize),h._sigPad.off()},h.clear=function(){return h._sigPad.clear()},h.isEmpty=function(){return h._sigPad.isEmpty()},h.fromDataURL=function(E,k){return h._sigPad.fromDataURL(E,k)},h.toDataURL=function(E,k){return h._sigPad.toDataURL(E,k)},h.fromData=function(E){return h._sigPad.fromData(E)},h.toData=function(){return h._sigPad.toData()},F=w,p(h,F)}return x(d,_),g(d,[{key:"componentDidMount",value:function(){this._sigPad=new W.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var b=this,w=this.props.canvasProps;return M.default.createElement("canvas",y({ref:function(h){b._canvas=h}},w))}}]),d}(C.Component);z.propTypes={velocityFilterWeight:v.default.number,minWidth:v.default.number,maxWidth:v.default.number,minDistance:v.default.number,dotSize:v.default.oneOfType([v.default.number,v.default.func]),penColor:v.default.string,throttle:v.default.number,onEnd:v.default.func,onBegin:v.default.func,canvasProps:v.default.object,clearOnResize:v.default.bool},z.defaultProps={clearOnResize:!0},u.default=z},function(r,u){r.exports=n},function(r,u){r.exports=e},function(r,u){r.exports=i},function(r,u){r.exports=s}])})})(X);var ot=X.exports;const it=J(ot);function ft({onNext:t,data:o,setForm:n}){const e=j.useRef(null);j.useEffect(()=>{o.signature&&e.current&&e.current.fromDataURL(o.signature)},[o.signature]);const i=()=>{e.current.clear()},s=()=>{const r=e.current.toDataURL();n({...o,signature:r}),t()};return T.jsxs(T.Fragment,{children:[T.jsx("h2",{children:"Signature Pad"}),T.jsx(Q,{sx:{border:2,borderRadius:"5px"},children:T.jsx(it,{className:"w-full",ref:e,penColor:"black",canvasProps:{style:{width:"100%",height:"300px"},className:"signature-canvas"}})}),T.jsx("br",{}),T.jsx(I,{variant:"outlined",color:"error",onClick:i,children:"Clear"}),T.jsx(I,{className:"w-full",variant:"contained",onClick:s,sx:{mt:1,mr:1},children:"Continue"})]})}export{ft as default};
